<view class="container">
  <!-- 用户信息区域 -->
  <view class="user-section">
    <view class="user-info">
      <image class="avatar" src="{{userInfo.avatar || '/images/default-avatar.png'}}" mode="aspectFill"></image>
      <view class="user-details">
        <text class="nickname">{{userInfo.nickname}}</text>
        
        <!-- 会员状态显示 -->
        <view class="membership-status" tt:if="{{userInfo.subscription}}">
          <text class="membership-badge">{{userInfo.subscription.name}} 会员</text>
          <text class="membership-expire">到期时间: {{userInfo.subscription.expireDate}}</text>
        </view>
        
        <view class="score-section">
          <view class="score-info">
            <text class="score-icon">💎</text>
            <text class="user-score">{{userInfo.score || 0}} 积分</text>
          </view>
          <button class="recharge-btn" bindtap="goToRecharge">
            <text class="recharge-icon">+</text>
            <text class="recharge-text">充值</text>
          </button>
        </view>
      </view>
      <!-- <button class="edit-btn" bindtap="editProfile">编辑</button> -->
    </view>
  </view>

  <!-- 统计数据区域 -->
  <!--
  <view class="stats-section">
    <view class="stats-title">数据统计</view>
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-number">{{statistics.totalVideos}}</text>
        <text class="stat-label">总视频数</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{statistics.todayVideos}}</text>
        <text class="stat-label">今日视频</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{statistics.totalSize}}</text>
        <text class="stat-label">总大小</text>
      </view>
    </view>
  </view>
  -->

  <!-- 案例展示卡片 -->
  <view class="case-showcase-card" bindtap="showCaseStudies">
    <view class="case-card-content">
      <view class="case-icon">📽️</view>
      <view class="case-text">
        <text class="case-title">案例展示</text>
        <text class="case-desc">查看精彩作品案例</text>
      </view>
      <view class="case-arrow">></view>
    </view>
  </view>

  <!-- 创造模版卡片 -->
  <view class="template-create-card" bindtap="createTemplate">
    <view class="template-card-content">
      <view class="template-icon">🎨</view>
      <view class="template-text">
        <text class="template-title">创造模版</text>
        <text class="template-desc">制作个性化视频模版</text>
      </view>
      <view class="template-arrow">></view>
    </view>
  </view>

  <!-- 最近视频区域 -->
  <view class="recent-section">
    <view class="section-header">
      <text class="section-title">最近视频</text>
      <text class="view-all" bindtap="viewAllVideos">查看全部</text>
    </view>
    
    <scroll-view 
      scroll-y
      style="max-height: 240px"
      tt:if="{{!recentVideos.length==0}}"
    >
      <view class="video-grid">
        <view class="video-item" tt:for="{{recentVideos}}" tt:key="id" style="--progress: {{item.progress}}">
          <view class="video-thumb-container">
            <image 
              class="video-thumb" 
              src="{{item.thumbnail || '/images/placeholder.png'}}" 
              mode="aspectFill" 
            />
            <view class="loading-placeholder" tt:if="{{!item.thumbnail && item.status==="error"}}">
              <text class="" style="font-size: 0.8em;color: #e47979;">error</text>
            </view>
            <view class="loading-placeholder" tt:if="{{!item.thumbnail && item.status==="pending"}}">
              <text class="loading-text">loading...</text>
              <div class="spinner">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                </div>
            </view>
          </view>
          <view class="video-info">
            <text class="video-name">{{item.name}}</text>
            <text class="progress-text">{{item.status === 'completed' ? '100%' : item.progress + '%'}}</text>
            <!-- 调试信息 -->
            <!-- <text style="font-size: 8px; color: #666;">状态: {{item.status}}</text> -->
          </view>
          <view class="video-status {{item.status}}">
            {{item.status === 'completed' ? '已完成' : (item.status === 'pending' ? '处理中' : (item.status === 'processing' ? '处理中' : '生成失败'))}}
          </view>
        </view>

      </view>
    </scroll-view>
    <view class="empty-state" tt:if="{{recentVideos.length === 0}}">
      <text class="empty-text">暂无生成视频</text>
      <text class="empty-desc">快去试试吧</text>
      <!-- <button class="empty-button" bindtap="navigateToDetail">开始制作</button> -->
    </view>
  </view>

  <!-- 功能菜单区域 -->
  <view class="menu-section">
    <view class="menu-group">
      <view class="menu-item" bindtap="shareApp">
        <view class="menu-icon">📤</view>
        <text class="menu-text">分享应用</text>
        <view class="menu-arrow">></view>
      </view>


      <view class="menu-item" bindtap="feedback">
        <view class="menu-icon">📝</view>
        <text class="menu-text">意见反馈</text>
        <view class="menu-arrow">></view>
      </view>
      
      <view class="menu-item" bindtap="aboutUs">
        <view class="menu-icon">ℹ️</view>
        <text class="menu-text">关于我们</text>
        <view class="menu-arrow">></view>
      </view>
    </view>

    <view class="menu-group">
      <view class="menu-item" bindtap="clearCache">
        <view class="menu-icon">🗑️</view>
        <text class="menu-text">清除缓存</text>
        <view class="menu-arrow">></view>
      </view>
      
      <!-- <view class="menu-item" bindtap="goToSettings">
        <view class="menu-icon">⚙️</view>
        <text class="menu-text">设置</text>
        <view class="menu-arrow">></view>
      </view> -->
    </view>

    <!-- 退出登录按钮 -->
    <view class="menu-group">
      <view class="menu-item logout-item" bindtap="logout">
        <view class="menu-icon">🚪</view>
        <text class="menu-text logout-text">退出登录</text>
        <view class="menu-arrow">></view>
      </view>
    </view>
  </view>

  <!-- 底部导航栏 -->
  <!-- <bottom-nav current="profile" bind:navchange="onNavChange"></bottom-nav> -->

  <!-- 添加自定义导航栏 -->
  <custom-tab-bar />
</view> 